// Generated by CoffeeScript 1.6.3
(function() {
  var _;

  _ = require("underscore");

  module.exports.HttpHandler = (function() {
    function HttpHandler(app, mount) {
      this.app = app;
      this.mount = mount;
      this.source = this.createSource();
    }

    HttpHandler.prototype.serveClient = function(req, res) {
      var _this = this;
      return this.createClient(req, res, function(client) {
        _this.source.addClient(client);
        return res.on("end", function() {
          return _this.source.removeClient(client);
        });
      });
    };

    return HttpHandler;

  })();

}).call(this);
